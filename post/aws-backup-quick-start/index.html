<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>自动化备份解决方案AWS Backup快速入门 | CC&#39;s Weblog</title>
<meta name="description" content="个人站点">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://cchen7.github.io/favicon.ico?v=1584278394028">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://cchen7.github.io/styles/main.css">


  

  
    <link rel="stylesheet" href="https://unpkg.com/disqusjs@1.1/dist/disqusjs.css" />
  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />



  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://cchen7.github.io">
        <img src="https://cchen7.github.io/images/avatar.png?v=1584278394028" class="site-logo">
        <h1 class="site-title">CC&#39;s Weblog</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      个人站点
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com" target="_blank">GitHub</a> | <a class="rss" href="https://cchen7.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">自动化备份解决方案AWS Backup快速入门</h2>
            <div class="post-date">2020-03-15</div>
            
              <div class="feature-container" style="background-image: url('https://cchen7.github.io/post-images/aws-backup-quick-start.png')">
              </div>
            
            <div class="post-content">
              <p>关键词：AWS Backup，备份，EBS<br>
适读水平：AWS入门水平<br>
适读职业：运维人员<br>
应用场景：数据备份</p>
<p>近日，AWS在中国北京区域和宁夏区域上线了AWS Backup服务。AWS Backup 是一种完全托管、基于策略的备份解决方案，可以在云中以及本地跨 AWS 服务轻松地自动备份应用程序数据。本文来介绍一下AWS Backup的基本使用，让您能快速上手这个备份服务。</p>
<p>在一个复杂的工作负载架构中，存在有很多不同的数据，比如EBS的快照，EFS的卷，以及RDS数据库等。虽然这些服务AWS都提供了相应的备份功能，例如EC2的生命周期管理，但对于运维人员来说如果能有一个服务自动化的统一管理这些备份，会有效提高数据管理的效率。 在过去，在AWS上实现自动化备份管理，可能需要用到自己编写的脚本调用api或者Lambda函数。AWS Backup提供了一个统一的管理门户去管理备份任务，并定期将备份同步到冷存储。可以看下AWS Backup的架构图。<br>
<img src="https://cchen7.github.io/post-images/1584269489064.png" alt="" loading="lazy"></p>
<h2 id="aws-backup的优势">AWS Backup的优势</h2>
<h3 id="集中管理备份">集中管理备份</h3>
<p>从中央备份控制台配置备份策略，简化备份管理，并轻松确保各种 AWS 服务中的应用程序数据得到备份和保护。通过 AWS Backup 的中央控制台、API 或者命令行界面使用 AWS Storage Gateway 针对云中和本地的各种 AWS 服务进行备份、还原和设置保留策略。</p>
<h3 id="自动执行备份流程">自动执行备份流程</h3>
<p>利用 AWS Backup 完全托管并且基于策略的解决方案节省时间和资金。AWS Backup 支持自动备份计划、保留管理和生命周期管理，不需要使用自定义脚本和手动流程。利用 AWS Backup，只要标记 AWS 资源就可以将备份策略应用于AWS 资源，从而轻松地对所有 AWS 资源实施备份策略，并确保所有应用程序数据都得到正确备份。</p>
<h3 id="提高备份合规性">提高备份合规性</h3>
<p>在中央控制台执行备份策略、加密备份以及审核备份活动，满足备份合规性要求。备份策略可以轻松与内部要求或监管要求保持一致。AWS Backup 可以加密动态数据和静态数据，保证备份的安全性。不同 AWS 服务采用统一的备份活动日志，可以简化合规审核工作。AWS Backup 符合 PCI、ISO 和 HIPAA 的规定。</p>
<h2 id="aws-backup的常用场景">AWS  Backup的常用场景</h2>
<h3 id="云备份">云备份</h3>
<p>AWS Backup 提供中央控制台，可以自动执行和管理不同 AWS 服务的备份工作。AWS Backup 与 Amazon EBS、Amazon RDS、Amazon DynamoDB、Amazon EFS 和 AWS Storage Gateway 集成，让您可以备份存储卷、数据库和文件系统等重要数据存储。在未来也可能支持更多的AWS服务数据备份。<br>
<img src="https://cchen7.github.io/post-images/1584269525956.png" alt="" loading="lazy"></p>
<p>###混合云备份<br>
AWS Backup 可以提供一种通用的方式来备份云中和本地的应用程序数据。AWS Backup 与 AWS Storage Gateway 集成，而 AWS Storage Gateway 是一种混合存储服务，让您的本地应用程序能够无缝地使用 AWS 云存储。这种集成让您能够将同样的备份策略应用到 AWS 云资源和存储在 AWS Storage Gateway 卷内的本地数据中。<br>
<img src="https://cchen7.github.io/post-images/1584269532925.png" alt="" loading="lazy"></p>
<h3 id="本地数据备份">本地数据备份</h3>
<p>AWS Backup 可以提供一种通用的方式来备份云中和本地的应用程序数据。AWS Backup 与 AWS Storage Gateway 集成，而 AWS Storage Gateway 是一种混合存储服务，让您的本地应用程序能够无缝地使用 AWS 云存储。您可以使用 AWS Backup 来备份存储在 AWS Storage Gateway 卷内的本地应用程序数据。AWS Storage Gateway 卷的备份安全地存储在 AWS 云中并且与 Amazon EBS 兼容，可以将卷还原到 AWS 云或本地环境中。<br>
<img src="https://cchen7.github.io/post-images/1584269545557.png" alt="" loading="lazy"></p>
<h2 id="快速上手">快速上手</h2>
<h3 id="备份计划">备份计划</h3>
<p>首先登录AWS Backup控制面板，可以看到有三个选项<br>
管理备份计划，按需备份，还原备份<br>
<img src="https://cchen7.github.io/post-images/1584269558488.png" alt="" loading="lazy"><br>
我们先创建一个备份计划<br>
AWS内置了几个默认备份计划，可以按需要选择。这里我们选择创建新计划。<br>
<img src="https://cchen7.github.io/post-images/1584269567289.png" alt="" loading="lazy"><br>
首先定义备份的频率，除了每日，每周等常见选择。可以使用cron表达式来定义备份频率，如果您在服务器上已经配置过crontab定时任务，就可以把任务的时间配置直接贴进去，很方便。<br>
<img src="https://cchen7.github.io/post-images/1584269589039.png" alt="" loading="lazy"><br>
然后是备份的时间窗口，就是备份任务开始执行的时间和执行的时间范围。如果备份数据量较大，我们需要加大时间窗口避免任务超时。</p>
<p>在备份EFS数据的时候，可以把数据转为冷存储，冷存储的价格仅为普通存储的20%，很适合长期归档的业务。<br>
在这里我们引入一个保管库的概念，所有的AWS Backup数据都存储在保管库中，这个保管库会使用KMS中的主密钥对数据进行加密，来满足安全和合规性要求。<br>
<img src="https://cchen7.github.io/post-images/1584269608122.png" alt="" loading="lazy"></p>
<p>同时AWS Backup还支持将备份数据同步到其他区域，这样就实现了异地备份的需求。<br>
<img src="https://cchen7.github.io/post-images/1584269622722.png" alt="" loading="lazy"></p>
<p>在创建完备份计划后就可以向计划内分配资源了<br>
<img src="https://cchen7.github.io/post-images/1584269631355.png" alt="" loading="lazy"></p>
<p>支持根据资源ID和tag两种模式进行分配，通过tag可以很容易批量定义要备份的相关资源。<br>
分配好资源后就可以等待备份按计划自动执行了。<br>
<img src="https://cchen7.github.io/post-images/1584269640605.png" alt="" loading="lazy"></p>
<h3 id="资源和任务">资源和任务</h3>
<p>在左侧的导航菜单里可以选择查看受保护的资源，也就是被分配到备份计划内的资源，可以查找和筛选确保重要资源没有遗漏。<br>
<img src="https://cchen7.github.io/post-images/1584269705193.png" alt="" loading="lazy"><br>
以及可以查看备份任务的执行情况<br>
<img src="https://cchen7.github.io/post-images/1584269710677.png" alt="" loading="lazy"></p>
<h3 id="备份保管库">备份保管库</h3>
<p>在备份保管库里我们可以看到每个备份的情况，包括恢复点，资源ID，到期时间等。可以在这里选择相应的恢复点进行还原操作<br>
<img src="https://cchen7.github.io/post-images/1584269717874.png" alt="" loading="lazy"></p>
<p>同时还可以定义访问策略，对备份数据的访问进行控制。</p>
<h2 id="总结">总结</h2>
<p>AWS Backup服务将各资源的备份功能整合在一个统一入口，并提供了方便简单的操作模式，更重要的是这个服务本身是免费的。只对备份占用的存储资源和还原数据的大小进行收费。符合云计算按需使用按需付费计费原则。建议在生产环境上进行配置使用，毕竟云上的数据安全是非常重要的。</p>
<hr>
<p>企业上云咨询 架构设计优化  行业解决方案<br>
<img src="https://cchen7.github.io/post-images/1583760540943.png" alt="" loading="lazy"></p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://cchen7.github.io/tag/XdTtyO--C/" class="tag">
                    AWS
                  </a>
                
                  <a href="https://cchen7.github.io/tag/iG3JcT5GqW/" class="tag">
                    Backup
                  </a>
                
                  <a href="https://cchen7.github.io/tag/zXj7J_e38/" class="tag">
                    Cloud
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://cchen7.github.io/post/6things-after-cloud-migration/">
                  <h3 class="post-title">
                    上云迁移之后的六件事
                  </h3>
                </a>
              </div>
            

            
              

              
                <div id="disqus_thread" data-aos="fade-in"></div>
              
            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>



  

  
    <script src="https://unpkg.com/disqusjs@1.1/dist/disqus.js"></script>
    <script>

    var options = {
      shortname: 'cc-blog',
      apikey: '8zgGTPmCBP0SnvxqKtIwB1J5KzTGjMSthLlLlTK18fgmzzsidcjTbgBB9Km3PgPt',
    }
    if ('https://disqus.com/api/') {
      options.api = 'https://disqus.com/api/'
    }
    var dsqjs = new DisqusJS(options)

    </script>
  




  </body>
</html>
